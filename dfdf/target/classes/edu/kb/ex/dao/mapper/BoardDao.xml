<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.kb.ex.dao.BoardDao">


	<select id="boardList" resultType="edu.kb.ex.dto.BoardDto">
		select bId,bName,bTitle,bDate  from PENSION_BOARD WHERE bType=#{param1} order by bId desc
	</select>
	
	<select id="boardContent" resultType="edu.kb.ex.dto.BoardDto">
		select bId,bName,bTitle,bDate,bContent from PENSION_BOARD where bId = #{param1} 
	</select>
	
	<select id="boardCount" resultType="int">
		select count(bId)  from PENSION_BOARD WHERE bType=#{param1}
	</select>
	
	
	<select id="boardcountDao" resultType="edu.kb.ex.dto.ContentDto"> 
		select count(*) FROM mvc_board
	</select>
	
	<select id="listDao" resultType="edu.kb.ex.dto.ContentDto">
		select bId, bTitle, bName, bHit, bDate from mvc_board order by bGroup desc, bStep asc
	</select>
	
	<select id="searchDao" resultType="edu.kb.ex.dto.ContentDto">
		select bId, bTitle, bName, bHit, bDate from mvc_board where 
		#{param1, jdbcType=VARCHAR} like CONCAT(#{param2, jdbcType=VARCHAR},'%')
		order by bGroup desc, bStep asc 
	</select>
	
	<select id="reviewDao" resultType="edu.kb.ex.dto.ContentDto">
		select * from mvc_board order by bGroup desc, bStep asc
	</select>
	
	<insert id="writeDao"> 
		insert into mvc_board(bId, bName, bTitle, bContent, bHit, bGroup, bStep, bIndent) values(mvc_board_seq.nextval,#{param1, jdbcType=VARCHAR},#{param2, jdbcType=VARCHAR},#{param3, jdbcType=VARCHAR},0,mvc_board_seq.currval,0,0)		
	</insert>
	
	<update id="upHitDao">
		update mvc_board set bHit = bHit+1 where bId= #{param1}
	</update>
	
	<select id="contentDao" resultType="edu.kb.ex.dto.ContentDto">
		select * from mvc_board where bId = #{param1}
	</select>
	
	<select id="c_contentDao" resultType="edu.kb.ex.dto.ContentDto">
		select * from mvc_board where bId = #{param1}
	</select>
	
	<update id="modifyDao">
		update mvc_board set bName = #{param1, jdbcType=VARCHAR}, bTitle = #{param2, jdbcType=VARCHAR}, bContent = #{param3, jdbcType=VARCHAR} where bId = #{param4}
	</update>
	
	<select id="replyViewDao" resultType="edu.kb.ex.dto.ContentDto">
		select * from  mvc_board where bId = #{param1}
	</select>
	
	<insert id="replyDao"> 
		insert into mvc_board(bId, bName, bTitle, bContent, bHit, bGroup, bStep, bIndent) values(mvc_board_seq.nextval, #{param1, jdbcType=VARCHAR})	
	</insert>

	<update id="replyShapeDao"> 
		update mvc_board set bStep = bStep+1 where bGroup = #{param1}, bStep = #{param2}
	</update>	
	
	<delete id="deleteDao">
		delete mvc_board where bId in (#{param1, jdbcType=VARCHAR}) 
	</delete>
	
</mapper>


